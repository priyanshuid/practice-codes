/*! ISSUU.smartlook - v0.0.2 - 2013-08-21
* https://github.com/issuu/frontend-smartlook
* Copyright (c) 2013 Issuu Aps; Licensed MIT */
if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),ISSUU.swfobject=function(){function C(){if(b)return;try{var e=a.getElementsByTagName("body")[0].appendChild(U("span"));e.parentNode.removeChild(e)}catch(t){return}b=!0;var n=c.length;for(var r=0;r<n;r++)c[r]()}function k(e){b?e():c[c.length]=e}function L(t){if(typeof u.addEventListener!=e)u.addEventListener("load",t,!1);else if(typeof a.addEventListener!=e)a.addEventListener("load",t,!1);else if(typeof u.attachEvent!=e)z(u,"onload",t);else if(typeof u.onload=="function"){var n=u.onload;u.onload=function(){n(),t()}}else u.onload=t}function A(){l?O():M()}function O(){var n=a.getElementsByTagName("body")[0],r=U(t);r.setAttribute("type",i);var s=n.appendChild(r);if(s){var o=0;(function(){if(typeof s.GetVariable!=e){var t=s.GetVariable("$version");t&&(t=t.split(" ")[1].split(","),T.pv=[parseInt(t[0],10),parseInt(t[1],10),parseInt(t[2],10)])}else if(o<10){o++,setTimeout(arguments.callee,10);return}n.removeChild(r),s=null,M()})()}else M()}function M(){var t=h.length;if(t>0)for(var n=0;n<t;n++){var r=h[n].id,i=h[n].callbackFn,s={success:!1,id:r};if(T.pv[0]>0){var o=R(r);if(o)if(W(h[n].swfVersion)&&!(T.wk&&T.wk<312))V(r,!0),i&&(s.success=!0,s.ref=_(r),i(s));else if(h[n].expressInstall&&D()){var u={};u.data=h[n].expressInstall,u.width=o.getAttribute("width")||"0",u.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(u.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(u.align=o.getAttribute("align"));var a={},f=o.getElementsByTagName("param"),l=f.length;for(var c=0;c<l;c++)f[c].getAttribute("name").toLowerCase()!="movie"&&(a[f[c].getAttribute("name")]=f[c].getAttribute("value"));P(u,a,r,i)}else H(o),i&&i(s)}else{V(r,!0);if(i){var p=_(r);p&&typeof p.SetVariable!=e&&(s.success=!0,s.ref=p),i(s)}}}}function _(n){var r=null,i=R(n);if(i&&i.nodeName=="OBJECT")if(typeof i.SetVariable!=e)r=i;else{var s=i.getElementsByTagName(t)[0];s&&(r=s)}return r}function D(){return!w&&W("6.0.65")&&(T.win||T.mac)&&!(T.wk&&T.wk<312)}function P(t,n,r,i){w=!0,g=i||null,y={success:!1,id:r};var o=R(r);if(o){o.nodeName=="OBJECT"?(v=B(o),m=null):(v=o,m=r),t.id=s;if(typeof t.width==e||!/%$/.test(t.width)&&parseInt(t.width,10)<310)t.width="310";if(typeof t.height==e||!/%$/.test(t.height)&&parseInt(t.height,10)<137)t.height="137";a.title=a.title.slice(0,47)+" - Flash Player Installation";var f=T.ie&&T.win?"ActiveX":"PlugIn",l="MMredirectURL="+u.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+a.title;typeof n.flashvars!=e?n.flashvars+="&"+l:n.flashvars=l;if(T.ie&&T.win&&o.readyState!=4){var c=U("div");r+="SWFObjectNew",c.setAttribute("id",r),o.parentNode.insertBefore(c,o),o.style.display="none",function(){o.readyState==4?o.parentNode.removeChild(o):setTimeout(arguments.callee,10)}()}j(t,n,r)}}function H(e){if(T.ie&&T.win&&e.readyState!=4){var t=U("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(B(e),t),e.style.display="none",function(){e.readyState==4?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(B(e),e)}function B(e){var n=U("div");if(T.win&&T.ie)n.innerHTML=e.innerHTML;else{var r=e.getElementsByTagName(t)[0];if(r){var i=r.childNodes;if(i){var s=i.length;for(var o=0;o<s;o++)(i[o].nodeType!=1||i[o].nodeName!="PARAM")&&i[o].nodeType!=8&&n.appendChild(i[o].cloneNode(!0))}}}return n}function j(n,r,s){var o,u=R(s);if(T.wk&&T.wk<312)return o;if(u){typeof n.id==e&&(n.id=s);if(T.ie&&T.win){var a="";for(var f in n)n[f]!=Object.prototype[f]&&(f.toLowerCase()=="data"?r.movie=n[f]:f.toLowerCase()=="styleclass"?a+=' class="'+n[f]+'"':f.toLowerCase()!="classid"&&(a+=" "+f+'="'+n[f]+'"'));var l="";for(var c in r)r[c]!=Object.prototype[c]&&(l+='<param name="'+c+'" value="'+r[c]+'" />');u.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+l+"</object>",p[p.length]=n.id,o=R(n.id)}else{var h=U(t);h.setAttribute("type",i);for(var d in n)n[d]!=Object.prototype[d]&&(d.toLowerCase()=="styleclass"?h.setAttribute("class",n[d]):d.toLowerCase()!="classid"&&h.setAttribute(d,n[d]));for(var v in r)r[v]!=Object.prototype[v]&&v.toLowerCase()!="movie"&&F(h,v,r[v]);u.parentNode.replaceChild(h,u),o=h}}return o}function F(e,t,n){var r=U("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function I(e){var t=R(e);t&&t.nodeName=="OBJECT"&&(T.ie&&T.win?(t.style.display="none",function(){t.readyState==4?q(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function q(e){var t=R(e);if(t){for(var n in t)typeof t[n]=="function"&&(t[n]=null);t.parentNode.removeChild(t)}}function R(e){var t=null;try{t=a.getElementById(e)}catch(n){}return t}function U(e){return a.createElement(e)}function z(e,t,n){e.attachEvent(t,n),d[d.length]=[e,t,n]}function W(e){var t=T.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function X(n,r,i,s){if(T.ie&&T.mac)return;var o=a.getElementsByTagName("head")[0];if(!o)return;var u=i&&typeof i=="string"?i:"screen";s&&(E=null,S=null);if(!E||S!=u){var f=U("style");f.setAttribute("type","text/css"),f.setAttribute("media",u),E=o.appendChild(f),T.ie&&T.win&&typeof a.styleSheets!=e&&a.styleSheets.length>0&&(E=a.styleSheets[a.styleSheets.length-1]),S=u}T.ie&&T.win?E&&typeof E.addRule==t&&E.addRule(n,r):E&&typeof a.createTextNode!=e&&E.appendChild(a.createTextNode(n+" {"+r+"}"))}function V(e,t){if(!x)return;var n=t?"visible":"hidden";b&&R(e)?R(e).style.visibility=n:X("#"+e,"visibility:"+n)}function $(t){var n=/[\\\"<>\.;]/,r=n.exec(t)!=null;return r&&typeof encodeURIComponent!=e?encodeURIComponent(t):t}var e="undefined",t="object",n="Shockwave Flash",r="ShockwaveFlash.ShockwaveFlash",i="application/x-shockwave-flash",s="SWFObjectExprInst",o="onreadystatechange",u=window,a=document,f=navigator,l=!1,c=[A],h=[],p=[],d=[],v,m,g,y,b=!1,w=!1,E,S,x=!0,T=function(){var s=typeof a.getElementById!=e&&typeof a.getElementsByTagName!=e&&typeof a.createElement!=e,o=f.userAgent.toLowerCase(),c=f.platform.toLowerCase(),h=c?/win/.test(c):/win/.test(o),p=c?/mac/.test(c):/mac/.test(o),d=/webkit/.test(o)?parseFloat(o.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,v=!1,m=[0,0,0],g=null;if(typeof f.plugins!=e&&typeof f.plugins[n]==t)g=f.plugins[n].description,g&&(typeof f.mimeTypes==e||!f.mimeTypes[i]||!!f.mimeTypes[i].enabledPlugin)&&(l=!0,v=!1,g=g.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(g.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(g.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(g)?parseInt(g.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof u.ActiveXObject!=e)try{var y=new ActiveXObject(r);y&&(g=y.GetVariable("$version"),g&&(v=!0,g=g.split(" ")[1].split(","),m=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]))}catch(b){}return{w3:s,pv:m,wk:d,ie:v,win:h,mac:p}}(),N=function(){if(!T.w3)return;(typeof a.readyState!=e&&a.readyState=="complete"||typeof a.readyState==e&&(a.getElementsByTagName("body")[0]||a.body))&&C(),b||(typeof a.addEventListener!=e&&a.addEventListener("DOMContentLoaded",C,!1),T.ie&&T.win&&(a.attachEvent(o,function(){a.readyState=="complete"&&(a.detachEvent(o,arguments.callee),C())}),u==top&&function(){if(b)return;try{a.documentElement.doScroll("left")}catch(e){setTimeout(arguments.callee,0);return}C()}()),T.wk&&function(){if(b)return;if(!/loaded|complete/.test(a.readyState)){setTimeout(arguments.callee,0);return}C()}(),L(C))}(),J=function(){T.ie&&T.win&&window.attachEvent("onunload",function(){var e=d.length;for(var t=0;t<e;t++)d[t][0].detachEvent(d[t][1],d[t][2]);var n=p.length;for(var r=0;r<n;r++)I(p[r]);for(var i in T)T[i]=null;T=null;for(var s in swfobject)swfobject[s]=null;swfobject=null})}();return{registerObject:function(e,t,n,r){if(T.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,h[h.length]=i,V(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(T.w3)return _(e)},embedSWF:function(n,r,i,s,o,u,a,f,l,c){var h={success:!1,id:r};T.w3&&!(T.wk&&T.wk<312)&&n&&r&&i&&s&&o?(V(r,!1),k(function(){i+="",s+="";var p={};if(l&&typeof l===t)for(var d in l)p[d]=l[d];p.data=n,p.width=i,p.height=s;var v={};if(f&&typeof f===t)for(var m in f)v[m]=f[m];if(a&&typeof a===t)for(var g in a)typeof v.flashvars!=e?v.flashvars+="&"+g+"="+a[g]:v.flashvars=g+"="+a[g];if(W(o)){var y=j(p,v,r);p.id==r&&V(r,!0),h.success=!0,h.ref=y}else{if(u&&D()){p.data=u,P(p,v,r,c);return}V(r,!0)}c&&c(h)})):c&&c(h)},switchOffAutoHideShow:function(){x=!1},ua:T,getFlashPlayerVersion:function(){return{major:T.pv[0],minor:T.pv[1],release:T.pv[2]}},hasFlashPlayerVersion:W,createSWF:function(e,t,n){return T.w3?j(e,t,n):undefined},showExpressInstall:function(e,t,n,r){T.w3&&D()&&P(e,t,n,r)},removeSWF:function(e){T.w3&&I(e)},createCSS:function(e,t,n,r){T.w3&&X(e,t,n,r)},addDomLoadEvent:k,addLoadEvent:L,getQueryParamValue:function(e){var t=a.location.search||a.location.hash;if(t){/\?/.test(t)&&(t=t.split("?")[1]);if(e==null)return $(t);var n=t.split("&");for(var r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return $(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(w){var e=R(s);e&&v&&(e.parentNode.replaceChild(v,e),m&&(V(m,!0),T.ie&&T.win&&(v.style.display="block")),g&&g(y)),w=!1}}}}();if(!window.ISSUU)var ISSUU={};ISSUU.Shadowbox={},ISSUU.Shadowbox.lib=function(){var e=document.defaultView;return{adapter:"standalone",getStyle:e&&e.getComputedStyle?function(t,n){var r,i;return n=="float"&&(n="cssFloat"),(r=t.style[n])?r:(i=e.getComputedStyle(t,""))?i[n]:null}:function(e,t){var n,r;if(t=="opacity"){if(typeof e.style.filter=="string"){var i=e.style.filter.match(/alpha\(opacity=(.+)\)/i);if(i){var s=parseFloat(i[1]);if(!isNaN(s))return s?s/100:0}}return 1}return t=="float"&&(t="styleFloat"),(n=e.style[t])?n:(r=e.currentStyle)?r[t]:null},get:function(e){return typeof e=="string"?document.getElementById(e):e},remove:function(e){e.parentNode.removeChild(e)},getTarget:function(e){var t=e.target?e.target:e.srcElement;return t.nodeType==3?t.parentNode:t},getPageXY:function(e){var t=e.pageX||e.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),n=e.pageY||e.clientY+(document.documentElement.scrollTop||document.body.scrollTop);return[t,n]},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},keyCode:function(e){return e.which?e.which:e.keyCode},addEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},append:function(e,t){if(e.insertAdjacentHTML)e.insertAdjacentHTML("BeforeEnd",t);else if(e.lastChild){var n=e.ownerDocument.createRange();n.setStartAfter(e.lastChild);var r=n.createContextualFragment(t);e.appendChild(r)}else e.innerHTML=t}}}();if(!window.ISSUU||typeof ISSUU.Shadowbox=="undefined")throw"Unable to load Shadowbox, no base library adapter found";(function(){var e="issuu-1.0",t='<div id="issuusb-container"><div id="issuusb-overlay"></div><div id="issuusb-wrapper"><div id="issuusb-body"><div id="issuusb-body-inner"></div></div><table id="issuusb-shadow" border="0" cellspacing="0" cellpadding="0"><tr><td id="issuusb-corner-tl"></td><td id="issuusb-fill-t">&nbsp;</td><td id="issuusb-corner-tr" onclick="ISSUU.Shadowbox.close()"></td></tr><tr><td id="issuusb-fill-l"></td><td id="issuusb-fill"></td><td id="issuusb-fill-r"></td></tr><tr><td id="issuusb-corner-bl"></td><td id="issuusb-fill-b"></td><td id="issuusb-corner-br"></td></tr></table></div></div>',n=["issuusb-corner-tl","issuusb-corner-tr","issuusb-corner-bl","issuusb-corner-br","issuusb-fill-t","issuusb-fill-b","issuusb-fill-l","issuusb-fill-r","issuusb-close"],r={animate:!0,animateFade:!0,ease:function(e){return 1+Math.pow(e-1,3)},enableKeys:!0,fadeDuration:.35,flashBgColor:"#fff",handleOversize:"resize",initialHeight:160,initialWidth:320,modal:!1,overlayColor:"#000",overlayOpacity:.5,resizeDuration:.35,showOverlay:!0,viewportPadding:10},i=ISSUU.Shadowbox,s=i.lib,o,u={alpha:/alpha\([^\)]*\)/gi,empty:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i},a,f,l="issuusb-content",c,h=!1,p=!1,d=!1,v=[],m=navigator.userAgent.toLowerCase(),g={isStrict:document.compatMode=="CSS1Compat",isOpera:m.indexOf("opera")>-1,isIE:m.indexOf("msie")>-1,isIE7:m.indexOf("msie 7")>-1,isSafari:/webkit|khtml/.test(m),isWindows:m.indexOf("windows")!=-1||m.indexOf("win32")!=-1,isMac:m.indexOf("macintosh")!=-1||m.indexOf("mac os x")!=-1,isLinux:m.indexOf("linux")!=-1};g.isBorderBox=g.isIE&&!g.isStrict,g.isSafari3=g.isSafari&&!!document.evaluate,g.isGecko=m.indexOf("gecko")!=-1&&!g.isSafari;var y=m.indexOf("msie 6")>-1||!g.isStrict,b=46,w=function(e,t){for(var n in t)e[n]=t[n];return e},E=function(e,t,n){for(var r=0,i=e.length;r<i;++r)t.call(n||e[r],e[r],r,e)};s.getViewportHeight=function(){var e=window.innerHeight,t=document.compatMode;return(t||g.isIE)&&!g.isOpera&&(e=g.isStrict?document.documentElement.clientHeight:document.body.clientHeight),e},s.getViewportWidth=function(){var e=window.innerWidth,t=document.compatMode;if(t||g.isIE)e=g.isStrict?document.documentElement.clientWidth:document.body.clientWidth;return e};var S=function(e){var t="<"+e.tag;for(var n in e){if(n=="tag"||n=="html"||n=="children")continue;t+=n=="cls"?' class="'+e.cls+'"':" "+n+'="'+e[n]+'"'}return u.empty.test(e.tag)?t+="/>":(t+=">",e.children&&E(e.children,function(e){t+=S(e)}),e.html&&(t+=e.html),t+="</"+e.tag+">"),t},x=function(e,t){var n=e.style;window.ActiveXObject?(n.zoom=1,n.filter=(n.filter||"").replace(u.alpha,"")+(t==1?"":" alpha(opacity="+t*100+")")):n.opacity=t},T=!1;if(navigator.plugins&&navigator.plugins.length){for(var N=0,C=navigator.plugins.length;N<C;++N)if(navigator.plugins[N].name=="Shockwave Flash"){T=!0;break}}else{try{var k=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(L){}T=!!k}var A=function(e,t,n,i,o){var u=parseFloat(s.getStyle(e,t));isNaN(u)&&(u=0);var a=n-u;if(a==0){o&&o();return}var f=t=="opacity",l=function(n){var r=u+n*a;f?x(e,r):e.style[t]=r+"px"};if(!i||!r.animate&&!f||f&&!r.animateFade){l(1),o&&o();return}i*=1e3;var c=(new Date).getTime(),h=c+i,p=setInterval(function(){var e=(new Date).getTime();e>=h?(clearInterval(p),l(1),o&&o()):l(r.ease((e-c)/i))},10)},O=function(e){var t=e.style;g.isIE?typeof t.filter=="string"&&/alpha/i.test(t.filter)&&(t.filter=t.filter.replace(/[\w\.]*alpha\(.*?\);?/i,"")):t.opacity=""},M=function(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")},_=function(){var e=a;f&&H(),F(!0),s.get("issuusb-wrapper").style.display="";var t=s.get("issuusb-overlay");contentHeight=e.height?parseInt(e.height,10):s.getViewportHeight(),contentWidth=e.width?parseInt(e.width,10):s.getViewportWidth(),f=!0,P(function(){if(!f)return;var t=7;if(T&&e.swfUrl){s.get("issuusb-body-inner").innerHTML='<div id="'+l+'"></div>';var n=e.swfUrl;e.swfUrlParams&&(n+="?"+M(e.swfUrlParams));var r=e.swfObjParams?e.swfObjParams:null,i=e.swfVersion?e.swfVersion:"9.0.0";ISSUU.swfobject.embedSWF(n,l,c.resize_w,c.resize_h-t,i,null,null,r,null,function(){setTimeout(function(){document.getElementById("issuusb-content").tabIndex=0,document.getElementById("issuusb-content").focus()},500)})}else{f={tag:"iframe",id:l,name:l,height:c.resize_h-t,width:c.resize_w,frameborder:"0",marginwidth:"0",marginheight:"0",scrolling:"auto"},g.isIE&&(f.allowtransparency="true",g.isIE7||(f.src='javascript:false;document.write("");')),s.get("issuusb-body-inner").innerHTML=S(f);var o=e.altUrl;e.altUrlParams&&(o+="?"+M(e.altUrlParams));var u=g.isIE?s.get(l).contentWindow:window.frames[l];u.location.href=o}F(!1)})},D=function(e,t){var n=s.get("issuusb-body"),i=s.get("issuusb-body-inner"),o=s.get("issuusb-overlay"),u=s.get("issuusb-wrapper"),a=e=parseInt(e),f=t=parseInt(t),l=o.offsetHeight,h=o.offsetWidth,p=s.getViewportHeight(),d=s.getViewportWidth(),v=r.viewportPadding,m=b,g=2*v+m;f+g>=d&&(f=d-g);var y=b,w=2*v+y;a+w>=p&&(a=p-w);var E=e,S=t;if(r.handleOversize=="resize"){var x=(e-a)/e,T=(t-f)/t;x>T?f=Math.round(t/e*a):T>x&&(a=Math.round(e/t*f)),S=f,E=a}c={height:a+y,width:f+m,inner_h:a,inner_w:f,top:(p-(a+w))/2+v,left:(d-(f+g))/2+v,resize_h:E,resize_w:S}},P=function(e){if(!f)return;D(s.getViewportHeight(),s.getViewportWidth());if(typeof e=="function")j(c.width,c.left,!0),B(c.inner_h,c.top,!0,e);else{j(c.width,c.left,!1),B(c.inner_h,c.top,!1);var t=s.get(l);t&&(t.height=c.resize_h,t.width=c.resize_w)}},H=function(){var e=s.get(l);if(e){var t=e.tagName&&e.tagName.toUpperCase()=="IFRAME";s.remove(e),t&&g.isGecko&&delete window.frames[l]}},B=function(e,t,n,i){var o=s.get("issuusb-body"),u=s.get("issuusb-wrapper"),a=s.get("issuusb-fill"),e=parseInt(e),t=parseInt(t),f=Math.max(0,e-b);n?(A(o,"height",e,r.resizeDuration),A(a,"height",f,r.resizeDuration),A(u,"top",t,r.resizeDuration,i)):(o.style.height=e+"px",a.style.height=f+"px",u.style.top=t+"px",i&&i())},j=function(e,t,n,i){var o=s.get("issuusb-wrapper"),u=s.get("issuusb-body"),e=parseInt(e),t=parseInt(t),a=Math.max(0,e-b);n?(A(o,"width",e,r.resizeDuration),A(u,"width",a,r.resizeDuration),A(o,"left",t,r.resizeDuration,i)):(o.style.width=e+"px",u.style.width=a+"px",o.style.left=t+"px",i&&i())},F=function(e){if(!r.enableKeys)return;s[(e?"add":"remove")+"Event"](document,"keydown",I)},I=function(e){var t=s.keyCode(e);s.preventDefault(e),t==27&&i.close()},q=function(){s.get("issuusb-container").style.top=document.documentElement.scrollTop+"px"},R=function(){s.get("issuusb-overlay").style.height=s.getViewportHeight()+"px"},U=function(e){var t=e?"visible":"hidden";e?E(["select","object","embed"],function(e){E(document.getElementsByTagName(e),function(e){v.push([e,s.getStyle(e,"visibility")]),e.style.visibility=t})}):E(v,function(e){e[0].style.visibility=e[1]});var n=s.get("issuusb-overlay"),o=s.get("issuusb-container"),u=s.get("issuusb-wrapper");if(e)y&&(q(),R(),s.addEvent(window,"scroll",q)),r.showOverlay&&(d=!0,n.style.backgroundColor=r.overlayColor,x(n,0),r.modal||s.addEvent(n,"click",i.close),u.style.display="none"),o.style.visibility="visible",d&&A(n,"opacity",parseFloat(r.overlayOpacity),r.fadeDuration);else{s.removeEvent(n,"click",i.close),y&&s.removeEvent(window,"scroll",q);if(d){u.style.display="none";var a=function(){o.style.visibility="hidden",o.style.display=u.style.display="",O(n)};g.isWindows&&(g.isIE||g.isGecko)?a():A(n,"opacity",0,r.fadeDuration,a)}else o.style.visibility="hidden"}};i.init=function(e){if(h)return;w(r,e||{});var i=r.imgUrl,o='#issuusb-container, #issuusb-overlay {position:absolute;top:0;left:0;width:100%;margin:0;padding:0;}#issuusb-container {height:100%;display:none;visibility:hidden;z-index:999;}body > #issuusb-container {position:fixed;}#issuusb-overlay {height:expression(document.documentElement.clientHeight + "px");}#issuusb-container > #issuusb-overlay {height:100%;}#issuusb-wrapper {position:relative;text-align:left;}#issuusb-body {position:absolute;top:21px;left:23px;}#issuusb-body-inner {position:relative;width:100%;}#issuusb-shadow {width:100%;}#issuusb-corner-tl,#issuusb-corner-tr {width:46px;}#issuusb-fill-t,#issuusb-fill-b {height:46px;}#issuusb-corner-tl {background:url('+i+"tl.png);}"+"#issuusb-corner-tr {background:url("+i+"tr.png);}"+"#issuusb-corner-bl {background:url("+i+"bl.png);}"+"#issuusb-corner-br {background:url("+i+"br.png);}"+"#issuusb-fill-t {background:url("+i+"tm.png);}"+"#issuusb-fill-b {background:url("+i+"bm.png);}"+"#issuusb-fill-l {background:url("+i+"ml.png);}"+"#issuusb-fill-r {background:url("+i+"mr.png);}"+"#issuusb-fill {background-color: #fff;}",u=document.createElement("style");u.type="text/css",u.styleSheet?u.styleSheet.cssText=o:u.appendChild(document.createTextNode(o)),document.getElementsByTagName("head")[0].appendChild(u),s.append(document.body,t),g.isIE7&&(s.get("issuusb-container").style.position="fixed");if(y){s.get("issuusb-container").style.position="absolute",s.get("issuusb-body").style.zoom=1;var a,f;E(n,function(e){a=s.get(e),a&&(f=s.getStyle(a,"backgroundImage").match(/url\("(.*\.png)"\)/),f&&(a.style.backgroundImage="none",a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true,src="+f[1]+",sizingMethod=scale);"))})}var l;s.addEvent(window,"resize",function(){l&&(clearTimeout(l),l=null),p&&(l=setTimeout(function(){y&&R(),P()},50))}),h=!0},i.applyOptions=function(e){e&&(o=w({},r),r=w(r,e))},i.revertOptions=function(){o&&(r=o,o=null)},i.open=function(e,t){this.revertOptions(),(e.options||t)&&this.applyOptions(w(w({},e.options||{}),t||{})),a=e,p||(s.get("issuusb-container").style.display="block",D(r.initialHeight,r.initialWidth),B(c.inner_h,c.top,!1),j(c.width,c.left,!1),U(!0)),_(),p=!0},i.close=function(){if(!p)return;F(!1),U(!1),f&&(H(),f=null),p=!1}})();if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),ISSUU.smartlook.useragent=function(){var e=navigator.userAgent.toLowerCase(),t={version:(e.match(/.+(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],safari:/webkit/.test(e),opera:/opera/.test(e),msie:/msie/.test(e)&&!/opera/.test(e),mozilla:/mozilla/.test(e)&&!/(compatible|webkit)/.test(e)};t.version=t.msie&&parseInt(t.version,10)===6&&window.XMLHttpRequest?"7.0":t.version;var n={getVersion:function(){return t.version},isSafari:function(){return t.safari},isOpera:function(){return t.opera},isMsie:function(){return t.msie},isMozilla:function(){return t.mozilla}};return n}(),ISSUU.smartlook.base=function(){var e,t,n,r={guid:"",domain:"",path:"/",defaultSkin:"",slSelection:[{docTypes:"pdf",action:"pop",viewer:"magazine"},{docTypes:"odt|doc|wpd|sxw|rtf|odp|sxi",action:"pop",viewer:"presentation"},{docTypes:"ppt",action:"pop",viewer:"presentation"}]},i=7e3,s=3,o=!1,u="";for(var a=0;a<r.slSelection.length;a++)u+=(a!==0?"|":"")+r.slSelection[a].docTypes;return console.log("com.issuu:Supported sl types: ",u),{getViewerSwf:function(){return n},getApiBaseUrl:function(){return e+"slurp."+t+"/auto?"},getSnapTimeOut:function(){return i},getMaxNoFailedConnections:function(){return s},getSnapChangeDefaultSettings:function(){return r},getSupportedDocTypes:function(){return u},getDocumentUrl:function(e,n,r,i,s,o,u){console.log("TODO: 1. support of community mode, 2. support for skinning, 3. remove revision?"),i==="paper"&&s==="community"&&(s="window"),s||(s="pop");var a="http://"+t+"/"+e+"/docs/"+n+"/",f={};s==="pop"?i==="paper"?f.mode="a_p":f.mode="embed":s==="window"?i==="paper"?f.mode="a_p":f.mode="embed":s==="community",f.viewMode=i,f.documentId=r,o&&o!==""&&(f.layout=o),u&&(f.pageNumber=u);var l={base:a,params:f,getUrl:function(){var e=[];for(var t in f)e.push(t+"="+encodeURIComponent(f[t]));var n=this.base+"?"+e.join("&");return n},getNonFlashUrl:function(){var e=[];f.viewMode="paper",f.mode="a_p";for(var t in f)e.push(t+"="+encodeURIComponent(f[t]));var n=this.base+f.pageNumber+"?"+e.join("&");return n}};return console.log("com.issuu:","getDocumentUrl -",l),l},init:function(i){ISSUU.Shadowbox.init({imgUrl:i.popinShadowResources}),r.defaultSkin=i.defaultTheme,e=i.protocol,t=i.domain,n=i.flashViewerResource}}}();if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),ISSUU.smartlook.clickCapture=function(){function r(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function i(e,t){return function(n){console.log("com.issuu:","handle click"),console.log(e),r(n);var i=e.source,s=t,o=function(e,t){switch(e){case"true":return!0;case"false":return!1;default:return t}},u=function(e,t){switch(e){case"public":return"public";case"secret":return"secret";default:return t}},a=ISSUU.smartlook.base.getApiBaseUrl()+"autoSlurpId="+s.guid+"&slurpUrl="+encodeURIComponent(i)+"&access="+u(e.queryKey.issuuac,s.access)+"&downloadable="+o(e.queryKey.issuudl,s.downloadable)+"&commentsAllowed="+o(e.queryKey.issuuca,s.commentsAllowed)+"&ratingsAllowed="+o(e.queryKey.issuura,s.ratingsAllowed)+"&format=json&jsoncallback=?";ISSUU.smartlook.server.getJSON(a,function(e){console.log("com.issuu:Server Response for ",i,"is ",e);if(e&&e.rsp.stat!=="fail"){var t=e.rsp._content.autoSlurpStatus,n=ISSUU.smartlook.base.getDocumentUrl(t.username,t.name,t.documentId,s.viewer,s.action,s.skin,s.pageNumber);s.action==="pop"?n.params.viewMode!=="paper"?(console.log("com.issuu:show popin: ",t.title,t.name,t.documentId),ISSUU.Shadowbox.open({title:t.title,swfUrl:ISSUU.smartlook.base.getViewerSwf(),swfUrlParams:{mode:n.params.mode,documentId:n.params.documentId,viewMode:n.params.viewMode,slurpDownloadEnabled:!0,pageNumber:n.params.pageNumber},swfObjParams:{allowFullScreen:"true"},altUrl:n.getNonFlashUrl(),altUrlParams:{}})):ISSUU.Shadowbox.open({altUrl:n.getNonFlashUrl(),altUrlParams:{}}):window.location.href=n.getUrl()}else window.location=i})}}function s(e,t){console.log("com.issuu:","Inspecting candidate url -",e),e=e.replace(/\+/g,"%20");var n=ISSUU.smartlook.urlParser.parseUri(e);if(n.protocol.toLowerCase()!=="http")return console.log("com.issuu:Protocol mismatch -",n.protocol),!1;if(t.domain.indexOf("*")===0){var r=t.domain.slice(2);if(n.host.lastIndexOf(r)!==n.host.length-r.length)return console.log("com.issuu:Domain mismatch -",n.host," against ",t.domain),!1}else if(n.host!==t.domain)return console.log("com.issuu:Domain mismatch -",n.host," against ",t.domain),!1;if(n.path.indexOf(t.path)!==0)return console.log("com.issuu:Path mismatch -",t.path," against",n.path),!1;var i=new RegExp("\\.("+ISSUU.smartlook.base.getSupportedDocTypes()+")$","i");return i.test(n.file)?(console.log("com.issuu:","Successful candidate found"),!0):(console.log("com.issuu:Extension mismatch -",n.file," against supported types ",ISSUU.smartlook.base.getSupportedDocTypes()),!1)}var e,t,n=function(){return window.addEventListener?function(e,t,n,r){e.addEventListener(t,n,r)}:window.attachEvent?function(e,t,n,r){e.attachEvent("on"+t,n)}:function(){}}(),o={init:function(n){"slSettings:nomunge";var r=ISSUU.smartlook.useragent,i=r.isSafari()||r.isMsie()&&parseFloat(r.getVersion(),10)>=6||r.isMozilla()&&parseFloat(r.getVersion(),10)>=1.8;if(!i)return;console.log("com.issuu:","Validating smartlook configuration");var s=ISSUU.smartlook.base.getSnapChangeDefaultSettings();if(!n.guid){console.log("com.issuu: No guid given. Will not run sl-change");return}var o=new RegExp("^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$");if(!o.test(n.guid)){console.log("com.issuu: Invalid guid given. Will not run sl change");return}if(!n.domain){console.log("com.issuu:No domain given. Will not run sl-change");return}n.domain=n.domain.toLowerCase();var u=new RegExp("^(\\*\\.)?([a-z0-9-]+\\.)+[a-z]+$","i");if(!u.test(n.domain)){console.log("com.issuu:Not a valid domain ",n.domain);return}n.path||(console.log("com.issuu:No path given. Defaulting"),n.path=s.path),n.path.indexOf("/")!==0&&(n.path="/"+n.path),n.defaultSkin||(console.log("com.issuu:No skin given. Defaulting"),n.defaultSkin=s.defaultSkin);var a=[],f=[],l,c,h;for(l in s.slSelection){if(typeof s.slSelection[l]=="function")break;h=s.slSelection[l].docTypes.split("|");for(c in h)a[h[c]]=s.slSelection[l]}if(!n.slSelection||!(n.slSelection instanceof Array))console.log("com.issuu:No sl selection rules given. Defaulting"),n.slSelection=s.slSelection;var p=0;for(l in n.slSelection){if(typeof n.slSelection[l]=="function")break;var d=n.slSelection[l];h=d.docTypes.split("|");for(c in h)if(a[h[c]]){if(!d.guid||d.guid==="")d.guid=n.guid;if(!d.action||d.action!=="pop"&&d.action!=="community"&&d.action!=="window")d.action="pop";if(!d.viewer||d.viewer!=="magazine"&&d.viewer!=="presentation"&&d.viewer!=="paper")d.viewer=a[h[c]].viewer;d.skin=d.skin?d.skin:a[h[c]].skin,d.access=d.access&&d.access==="secret"?"secret":"public",d.downloadable=d.downloadable===!1?!1:!0,d.commentsAllowed=d.commentsAllowed===!0?!0:!1,d.ratingsAllowed=d.ratingsAllowed===!0?!0:!1,f[h[c]]=d,p++}}p===0&&(console.log("com.issuu:","Custom slSelection mismatch. Defaulting"),f=a),e=n,t=f,this.hijackLinks()},hijackLinks:function(){console.log("com.issuu:Hijacking links on page");var r=[];document.getElementsByTagName&&(r=document.getElementsByTagName("a"));if(r&&r.length!==0)for(var o=0;o<r.length;o++){var u=r[o].className.toString();if(u.indexOf("issuu-link-hijacked")!==-1)continue;var a=r[o].href,f=ISSUU.smartlook.urlParser.parseUri(a),l="";f.queryKey.issuusl&&(l=f.queryKey.issuusl);if(l.indexOf("ignore")!==-1)continue;if(s(a,e)){var c=f.file.split("."),h=f.anchor,p=1,d=t[c.pop()];if(h&&typeof h=="string"){h=h.toLowerCase();if(h.indexOf("page=")===0){var v=h.split("page=");v[1]&&(p=parseInt(v[1],10));if(isNaN(p)||p<1)p=1;console.log("com.issuu:","Candidate has a page anchor. Initial page set to: "+p)}}d.pageNumber=p,d&&(d.skin||(d.skin=e.defaultSkin),console.log("com.issuu:","hijacking",r[o].href),n(r[o],"click",i(f,d),!1),r[o].className=u+" issuu-link-hijacked")}}}};return o}();if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),ISSUU.smartlook.server=function(){function r(e){return document.getElementById?document.getElementById(e):document.all?document.all[e]:document.layers?document.layers[e]:undefined}var e=0,t=+(new Date),n=function(n){function a(e){n.success&&n.success(e)}function f(t){return function(n){var i=t;console.log(i," -->Response:",n),window[i]=undefined,a(n);try{delete window[i]}catch(s){}var o=r(i);if(o!==undefined){var u=document.getElementsByTagName("head")[0];u&&u.removeChild(o)}e=0}}function l(t){return function(n){var i=t;if(window[i]!==undefined){console.log(i," -->timed-out "),window[i]=function(e){window[i]=undefined;try{delete window[i]}catch(t){}};var s=r(i);if(s!==undefined){var o=document.getElementsByTagName("head")[0];o&&o.removeChild(s)}e++,a(null)}}}var i,s=/\=\?(&|$)/g;n.dataType==="json"&&n.url.match(s)&&(i="issuujsonp"+t++,n.url=n.url.replace(s,"="+i+"$1"),window[i]=f(i),setTimeout(l(i),ISSUU.smartlook.base.getSnapTimeOut()));var o=document.getElementsByTagName("head")[0],u=document.createElement("script");return u.id=i,u.src=n.url,console.log("com.issuu",n.url),n.scriptCharset&&(u.charset=n.scriptCharset),o.appendChild(u),undefined},i={getJSON:function(e,t){return n({type:"GET",url:e,data:null,success:t,dataType:"json"})},getFailCount:function(){return e}};return i}();if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),ISSUU.smartlook.urlParser=function(){var e={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t={parseUri:function(t){var n=e,r=n.parser[n.strictMode?"strict":"loose"].exec(t),i={},s=14;while(s--)i[n.key[s]]=r[s]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(e,t,r){t&&(i[n.q.name][t]=r)}),i}};return t}();if(typeof console=="undefined"){var console={};console.log=function(){}}if(!window.ISSUU)var ISSUU={};typeof window.ISSUU.smartlook=="undefined"&&(window.ISSUU.smartlook={}),console.log("com.issuu","Initialize smartlook. TODO! Change default values"),ISSUU.smartlook.base.init({protocol:"http://",domain:"issuu.com",popinShadowResources:"http://static.issuu.com/smartlook/54/img/",flashViewerResource:"http://static.issuu.com/preview/webembed/viewers/style1/v2/IssuuReader.swf",defaultTheme:"@@layout"});try{ISSUU.smartlook.clickCapture.init(window.issuuConfig)}catch(err){console.log("Exception: "+err)};